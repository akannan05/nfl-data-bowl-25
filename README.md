# Utility Maximization/Minimization in NFL Football

NFL Big Data Bowl 2025 Project. Animesh Joshi and Anirudh "Ani" Kannan.

Utility functions are functions that define the satisfaction a particular good provides to a customer. Utility functions can also be applied to activities and actions to define the satisfaction or utility that carrying out an action may have for the party involved. In the case of criminal justice, the utility function of a crime is defined as the probability of getting caught comitting that crime multiplied by the severity of the punishment. In international relations, the utility function of a threat used in deterrence or compellence is the probability of threat execution multiplied by the severity of a threat. Using this domain knowledge, we can define the utility function of a football pass play as the probability of a completion multiplied by the expected yardage gain of that play. This function will define the satisfaction or "utility" that a pass play has for an offensive team. The goal of the offense is to maximize this utility function while the goal of the defense is to minimize this utility function. This project will investigate how this utility function changes across different pass coverages and based on pre snap motion, and it will also investigate the marginal utility of defensive players under different coverage schemes and motions. The insights can be used by both offensive and defensive teams to optimize their approach to executing or defending against passing plays in the NFL.

Components of the Utility Function:

We define the utility function as p(completion) x expected yardage gain.

The probability of completion is defined as the probability that the pass is completed to any receiver on the field. This probability is estimated using a linear probability model, to allow for estimates within the full range of values from 0 to 1. There are multiple variables we use to fit the linear probability model. For each defender involved in the play, we find the closest offensive player to that defender using the euclidean distance algorithm, and we store a variable which holds the distance to the closest "offensive weapon" for each defender. An offensive weapon, for this project, is defined as a tight end, running back, wide receiver, or quarterback. The distance between defenders and weapons is not enough to estimate the probability of a pass completion, as if two defenders are both on one side of a defender, that coverage is not as strong as if there is one defender on each side of the defender. For this reason, we also decided to include an openness measure in the data used to fit the linear probability model. The openness measure is calculated by first finding all defenders who are closest to a given offensive weapon and taking the sum of their distances from said weapon. We then simulate the offensive player moving in each of the four directions and find the average change in the sum of the defenders' distances from the offensive method. That average change is the openness measure. The openness measure and closest offensive weapon metrics are used to fit the linear probability model that forecasts the probability of a pass being completed.

The expected yardage gain is a weighted average of the sum of the distance from the line of scrimmage and the forecasted yards after catch for each weapon involved in the play. The distance from the line of scrimmage is measured by taking the current y position and substracting from it the y position of the line of scrimmage. The yards after catch forecast is based on a linear regression model that is fitted based on data that includes the distances of the closest defenders to the given offensive weapon as well as the openness measure of the offensive weapon. In a pass play, each weapon does not have an equal probability of receiving the pass, as each weapon may be more or less open compared to their counterpart. We define a measure of aggregate openness as the sum of the distances from the weapon of defenders who are closest to the weapon and the oppenness metric of that weapon. The higher the aggregate openness, the more open the player. We define the probability of a player receiving the pass as their share of aggregate openness which is their aggregate openness divided by the sum of the aggregate openness of every offensive weapon on the field. For each weapon, this probability is then multiplied by the sum of the distance from the line of scrimmage and the forecasted yards after catch, which results in a weighted expectation of yardage gain for the passing play. 

The utility can then be calculated by taking the product of the completion probability and the weighted expectation of yardage gain. This utility can be found at any point in any passing play, and we can use this function to deliver data driven insights and analytics to help optimize offensive and defensive decision making during pass plays.
